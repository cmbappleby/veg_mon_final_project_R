---
title: "Arches Vegetation Cover 2010-2023"
author: "Christina Appleby"
format: 
  dashboard:
    orientation: columns
    embed-resources: true
    theme: lumen_mh.scss
    css: styles.css
---

```{r setup, include = F}

knitr::opts_chunk$set(echo = FALSE, message = F, warning = F)
options(knitr.duplicate.label = "allow")

# Install any missing packages
list.of.packages <- c('tidyverse',  'sf', 'leaflet', 'here', 'DT',
                      'gridExtra', 'cowplot', 'viridisLite'
                      )

# Load packages
lapply(list.of.packages, library, character.only = T)
```

```{r map leaflet setup}
map_leaflet <- function(data, center_lat, center_long, zoom, basemap){
  m = leaflet(data = data) %>%
  setView(lat = center_lat, lng = center_long, zoom = zoom)
  
  if (basemap == "osm") {
    m <- m %>%
      addTiles(group = "OpenStreetMap")
  } else {
    m <- m %>%
      addProviderTiles(
        provider = "Esri.WorldImagery",
        group = "ESRI World Imagery"
      )
  }

  m <- m %>%
  addPolylines(data = data,
               weight = 3, color = "darkgreen") %>%
  # addLayersControl(
  #   baseGroups = c('OpenStreetMap', 'ESRI World Imagery')) %>%
  addLegend(data = data,
            position = 'bottomright',
            colors =c('darkgreen'),
            labels = c('Park boundary'),
            title = "Legend",
            opacity = 1)

m
}

```

```{r data import setup, include = F}

### VEG DATA ###
arches_cover <- read_csv(here('data/arches_cover.csv'))
species_change <- read_csv(here('data/species_change.csv'))
species_trend <- read_csv(here('data/species_trend.csv'))
species_area_select <- read_csv(here('data/species_area_select.csv'))
species_area_top <- read_csv(here('data/species_area_top.csv'))
species_area_top_grasslands <- read_csv(here('data/species_top_grasslands.csv'))

### NCPN PARK BOUNDARIES ###
ncpn_units <-  st_read(
  here('data/NCPN_unit_boundaries/NCPN_unit_boundaries.shp')) %>% 
  st_transform(crs = 4326)

arches_boundary <- ncpn_units %>%
  filter(UNIT_CODE == 'ARCH')

```

# Overview

## Column intro {width='50%'}

### Row summary {height='35%'}

::: {.card title="NPS Inventory & Monitoring"}
The [National Park Service Inventory & Monitoring Division (IMD)](https://www.nps.gov/im/index.htm) 
consists of 32 networks that gather and analyze inventory and monitoring data, 
and communicate key information on park resources. The monitoring data helps 
park managers understand how the natural resources are changing over time, 
enabling them to make science-based management decisions.

Inventory and Monitoring Division (U.S. National Park Service). (n.d.). 
Retrieved December 13, 2025, from [https://www.nps.gov/im/index.htm](https://www.nps.gov/im/index.htm)
:::

### Row ncpn {.tabset height='65%'}

#### NCPN Uplands Vegetation & Soils Monitoring
The Northern Colorado Plateau Network (NCPN) conducts monitoring 
for 16 different park units. Upland Vegetation and Soils is considered a high 
monitoring priority since most of land on the Colorado Plateau is upland 
ecosystems. Upland areas include rock outcrops, shrublands, grasslands, 
woodlands, forests, badlands, and subalpine meadows. Plant communities, exotic 
invasive species, biological soil crusts, soil stability, and hydrologic 
function are monitored in uplands ecosystems.

Understanding how vegetation cover changes over time helps park managers to 
detect shifts in plant communities, identify at-risk areas, and make informed 
management decisions. This analysis quantifies vegetation cover trends at Arches
National Park as an example of how upland vegetation monitoring can 
provide information for resource management and conservation efforts.

Witwicki D, Thomas H, Weissinger R, Wight A, Topp S, Garman SL, Miller ME. 2017. Upland vegetation and soils monitoring protocol for park units in the Northern Colorado Plateau Network: version 1.07. Natural Resource Report. NPS/NCPN/NRR—2017/1570. National Park Service. Fort Collins, Colorado
[https://irma.nps.gov/DataStore/Reference/Profile/2248124](https://irma.nps.gov/DataStore/Reference/Profile/2248124)

Upland Vegetation and Soils (U.S. National Park Service). (n.d.). Retrieved 
December 13, 2025, from [https://www.nps.gov/im/ncpn/uplands.htm](https://www.nps.gov/im/ncpn/uplands.htm)

#### Arches NP
Arches National Park is located north of Moab in Southeast Utah and is part of 
NCPN. Elevation in the park ranges from about 4,000 feet in the canyons to 
5,200 feet on the rims. With an arid climate, the summers are hot and dry, and 
the winters are cool to cold. Average annual precipitation is about 8 inches, 
and temperatures can reach extremes, from -16F to 112F. Most of the park is 
covered by exposed bedrock, weakly developed soils, and sand dunes. The most 
common vegetation type in the park is desert shurblands, but woodlands and 
sparse woodlands are also common.

Biophysical Description of Arches National Park (U.S. National Park 
Service). (n.d.). Retrieved December 13, 2025, from 
[https://www.nps.gov/im/ncpn/bpd-arch.htm](https://www.nps.gov/im/ncpn/bpd-arch.htm)

Natural resources monitoring at Arches National Park 
(U.S. National Park Service). (n.d.). Retrieved December 13, 2025, from 
[https://www.nps.gov/im/ncpn/arch.htm](https://www.nps.gov/im/ncpn/arch.htm)

## Column ncpn map {width='50%'}

```{r ncpn_map}
cat("title= Map of NCPN Park Units") 

leaflet(data = ncpn_units) %>%
  setView(lat = '38.931732', lng = '-109.828180', zoom = 7) %>%
  addTiles(group = 'OpenStreetMap') %>%
  addPolylines(data = ncpn_units %>% filter(UNIT_CODE != 'ARCH'),
               weight = 3, color = 'darkgreen') %>%
  addPolylines(data = ncpn_units %>% filter(UNIT_CODE == 'ARCH'),
               weight = 3, color = 'darkorange') %>%
  addLayersControl(
    baseGroups = c('OpenStreetMap', 'ESRI World Imagery')) %>%
  addLegend(data = data,
            position = 'bottomright',
            colors =c('darkgreen', 'darkorange'),
            labels = c('Park boundary', 'Arches NP boundary'),
            title = "Legend",
            opacity = 1)
```

# Sampling

## Column methods {width='50%'}

::: {.card title='Sampling Design & Field Methods'}
Uplands monitoring began in Arches National Park in 2010 to address the 
management issue of social trailing, and approximately 2,500 hectares are 
monitored. The sampling unit is a plot and consists of three parallel, 50-meter 
transects that are spaced 25 meters apart. To increase the overall sample size, 
a rotating panel design is used where plots are sampled 1-2 years in a row with 
3-6 years of rest.

The point-intercept method is used for estimating vegetation and soil surface 
cover for grassland/shrubland vegetation types. Vegetation and ground 
cover attributes are recorded at 0.5-meter intervals. A laser is used at each 
point, and any vegetation, dead or alive, that the laser intercepts is recorded.
Additionally, vegetation at any height is recorded.

The [Upland Vegetation and Soils Monitoring Protocol](https://irma.nps.gov/DataStore/DownloadFile/593449), 
provides in-depth details about the sampling design.

Sources: 
Hobbs A, Wight A, Livensperger C, Witwicki D, Thomas H, Brehm JR, Miller ME, Weissinger R, Topp S, Garman SL. 2024. Upland Vegetation and Soils Monitoring for the Northern Colorado Plateau Network: 2009-2023 - Data Package. National Park Service. Fort Collins CO
[https://doi.org/10.57830/2305079](https://doi.org/10.57830/2305079)

Witwicki D, Thomas H, Weissinger R, Wight A, Topp S, Garman SL, Miller ME. 2017. Upland vegetation and soils monitoring protocol for park units in the Northern Colorado Plateau Network: version 1.07. Natural Resource Report. NPS/NCPN/NRR—2017/1570. National Park Service. Fort Collins, Colorado
[https://irma.nps.gov/DataStore/Reference/Profile/2248124](https://irma.nps.gov/DataStore/Reference/Profile/2248124)
:::

## Column data imgs {width='50%'}

### Data Collection Example

![Sample Datasheet](../images/data_sheet_example.png){width="95%"}

![Transect Points Associated with Sample Datasheet](../images/transect_points_example.png){width="95%"}
Source: [https://irma.nps.gov/DataStore/DownloadFile/631393](https://irma.nps.gov/DataStore/DownloadFile/631393)

# Analysis {orientation='rows'}

## Row {height='20%'}

### Column {.flow width='33%'}
```{r}
#| content: valuebox
#| title: 'Veg Records'
list(
  icon = 'file-spreadsheet',
  color = 'light',
  value = '1,969'
)
```

### Column {.flow width='34%'}
```{r}
#| content: valuebox
#| title: 'Plots'
list(
  icon = 'pin-map-fill',
  color = 'warning',
  value = '84'
)
```

### Column {.flow width='33%'}
```{r}
#| content: valuebox
#| title: 'Species'
list(
  icon = 'flower1',
  color = 'success',
  value = '106'
)
```

## Row {Height='80%'}

### Column {width='45%'}

::: {.card title='Analysis'}
I downloaded the [NCPN point-intercept CSV](https://irma.nps.gov/DataStore/Reference/Profile/2305079), read it into R, 
filtered for only Arches National Park and live vegetation 
records, then calculated percent cover by species to the plot level.

Since there are 84 plots, I wanted to explore the data to find the a 
meaningful but efficient way to show vegetation cover changes over time or
identify particular plots to focus on. First, I calculated percent change for 
each species using min and max values, regardless of year. Next, I calculated 
percent change for each species from the first to last survey year. For both, I
reviewed species with 10 percent change or greater, and identified select 
plots and species to focus on (see tables to the right).

To visualize the vegetation cover change, I converted cover from percentage to 
area, summed the cover area by species and year, and then calculated the percent
area (species cover area / total area sampled * 100).
:::

### Column {.tabset width='55%'}

#### Species Change

```{r change_table}
datatable(species_change %>% select(-Scientific_Name), 
          rownames = FALSE, 
          options = list(searching = FALSE))
```

#### Species Trend

```{r trend_table}
datatable(species_trend %>% select(-c(Scientific_Name, Trend)), 
          rownames = FALSE, 
          options = list(searching = FALSE))
```

# Results {orientation='rows'}

```{r graphs, include = F}
results_graphs <- list.files(here('plots'), full.names = TRUE)
```

## Row {height='30%'}

### Results
These plots focus on species with large changes in cover over time and were 
selected based on their frequency in the Species Change and Species Trend 
tables. Area of vegetation cover was used to observe changes in cover over time at the 
park-level.

## Row {height='70%'}

### Column {width='100%' .tabset}

#### Plot-Level Change

::: {.content}

| | | |
|---|---|---|
| ![](`r results_graphs[1]`) | ![](`r results_graphs[2]`) | ![](`r results_graphs[3]`) |

:::

#### Park-Level Change

::: {.content}

| | | |
|---|---|---|
| ![](`r results_graphs[4]`) | ![](`r results_graphs[5]`) | ![](`r results_graphs[6]`) |

:::

# Discussion

